# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ å®Œæ•´ç›®å½•ç»“æ„

```
NewWebpage/
â”œâ”€â”€ public/                          # é™æ€èµ„æº
â”‚   â””â”€â”€ vite.svg
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                         # åº”ç”¨æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ App.tsx                 # æ ¹ç»„ä»¶ï¼ˆProvider é…ç½®ï¼Œå…¨å±€çŠ¶æ€ï¼‰
â”‚   â”‚   â””â”€â”€ router.tsx              # è·¯ç”±é…ç½®ï¼ˆå®šä¹‰é¡µé¢è·¯ç”±è§„åˆ™ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                       # é¡µé¢ç»„ä»¶ï¼ˆè·¯ç”±ç›®æ ‡ï¼‰
â”‚   â”‚   â”œâ”€â”€ AuthPage/               # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx      # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ CallbackPage.tsx   # OAuth å›è°ƒå¤„ç†é¡µ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ SearchPage/             # æœç´¢ä¸»é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx          # æœç´¢é¡µé¢å…¥å£
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ FollowsPage/            # å…³æ³¨åˆ—è¡¨é¡µé¢
â”‚   â”‚   â”œâ”€â”€ SettingsPage/           # è®¾ç½®é¡µé¢
â”‚   â”‚   â”œâ”€â”€ AboutPage/              # å…³äºé¡µé¢
â”‚   â”‚   â”œâ”€â”€ TagsPage/               # æ ‡ç­¾é¡µé¢
â”‚   â”‚   â”œâ”€â”€ NotFoundPage/           # 404 é¡µé¢
â”‚   â”‚   â””â”€â”€ TestPage.tsx            # æµ‹è¯•é¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                    # ä¸šåŠ¡åŠŸèƒ½æ¨¡å—ï¼ˆæŒ‰é¢†åŸŸåˆ’åˆ†ï¼‰
â”‚   â”‚   â”œâ”€â”€ auth/                   # è®¤è¯åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ api/               # è®¤è¯ç›¸å…³ API
â”‚   â”‚   â”‚   â””â”€â”€ hooks/             # è®¤è¯ç›¸å…³ Hooks
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ threads/                # å¸–å­/ä¸²åŠŸèƒ½ï¼ˆæ ¸å¿ƒä¸šåŠ¡ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ api/               # å¸–å­ç›¸å…³ API
â”‚   â”‚   â”‚   â””â”€â”€ components/        # å¸–å­ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ ThreadCard.tsx         # å¸–å­å¡ç‰‡ï¼ˆåˆ—è¡¨å±•ç¤ºï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ ThreadListItem.tsx     # å¸–å­åˆ—è¡¨é¡¹ï¼ˆç´§å‡‘è§†å›¾ï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ ThreadPreviewOverlay.tsx # å¸–å­é¢„è§ˆå¼¹çª—
â”‚   â”‚   â”‚       â”œâ”€â”€ ThreadActions.tsx      # å¸–å­æ“ä½œæ 
â”‚   â”‚   â”‚       â”œâ”€â”€ MultiImageGrid.tsx     # å¤šå›¾å±•ç¤ºç½‘æ ¼
â”‚   â”‚   â”‚       â”œâ”€â”€ AuthorAvatar.tsx       # ä½œè€…å¤´åƒ
â”‚   â”‚   â”‚       â””â”€â”€ GlobalThreadPreview.tsx # å…¨å±€é¢„è§ˆå®¹å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ search/                 # æœç´¢åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ banner/                 # é¡¶éƒ¨ Banner åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ follows/                # å…³æ³¨åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ mascot/                 # å‰ç¥¥ç‰©/çœ‹æ¿å¨˜åŠŸèƒ½
â”‚   â”‚   â””â”€â”€ notifications/          # é€šçŸ¥åŠŸèƒ½
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                  # é€šç”¨/å…±äº«ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/                 # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ RootLayout.tsx     # æ ¹å¸ƒå±€å®¹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ MainLayout.tsx     # ä¸»å†…å®¹åŒºåŸŸå¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ AppSidebar.tsx     # ä¾§è¾¹æ å¯¼èˆª
â”‚   â”‚   â”‚   â”œâ”€â”€ TopBar.tsx         # é¡¶éƒ¨å¯¼èˆªæ 
â”‚   â”‚   â”‚   â”œâ”€â”€ FilterBar.tsx      # ç­›é€‰å·¥å…·æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ StatsBar.tsx       # ç»Ÿè®¡ä¿¡æ¯æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ BannerCarousel.tsx # é¦–é¡µè½®æ’­å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ UserCard.tsx       # ç”¨æˆ·ä¿¡æ¯å¡ç‰‡
â”‚   â”‚   â”‚   â””â”€â”€ ThemeProvider.tsx  # ä¸»é¢˜ä¸Šä¸‹æ–‡æä¾›è€…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ common/                 # é€šç”¨ UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ RippleButton.tsx   # æ°´æ³¢çº¹æŒ‰é’®
â”‚   â”‚   â”‚   â”œâ”€â”€ LazyImage.tsx      # æ‡’åŠ è½½å›¾ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ MarkdownText.tsx   # Markdown æ¸²æŸ“ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ HighlightText.tsx  # é«˜äº®æ–‡æœ¬ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchTokenInput.tsx # æœç´¢ Token è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ ScrollProgress.tsx # æ»šåŠ¨è¿›åº¦æ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ ScrollToTop.tsx    # å›åˆ°é¡¶éƒ¨æŒ‰é’®
â”‚   â”‚   â”‚   â”œâ”€â”€ Spoiler.tsx        # é˜²å‰§é€é®ç½©
â”‚   â”‚   â”‚   â”œâ”€â”€ ThemeToggle.tsx    # ä¸»é¢˜åˆ‡æ¢æŒ‰é’®
â”‚   â”‚   â”‚   â””â”€â”€ Tooltip.tsx        # å·¥å…·æç¤º
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ icons/                  # å›¾æ ‡ç»„ä»¶
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx       # é”™è¯¯è¾¹ç•Œ
â”‚   â”‚   â”œâ”€â”€ ProtectedRoute.tsx      # è·¯ç”±å®ˆå«ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ResizableSidebar.tsx    # å¯è°ƒæ•´å¤§å°ä¾§è¾¹æ 
â”‚   â”‚   â”œâ”€â”€ SearchHistory.tsx       # æœç´¢å†å²ç»„ä»¶
â”‚   â”‚   â””â”€â”€ SearchSuggestions.tsx   # æœç´¢å»ºè®®ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                       # å…¨å±€ Hooks
â”‚   â”‚   â””â”€â”€ (é€šç”¨ Hooks)
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                         # å·¥å…·åº“ä¸é…ç½®
â”‚   â”‚   â”œâ”€â”€ api/                    # API å®¢æˆ·ç«¯é…ç½®
â”‚   â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ utils.ts                # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ settings.ts             # è®¾ç½®ç›¸å…³é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ icons.ts                # å›¾æ ‡æ˜ å°„/é…ç½®
â”‚   â”‚   â”œâ”€â”€ searchHistory.ts        # æœç´¢å†å²é€»è¾‘
â”‚   â”‚   â””â”€â”€ searchTokenizer.ts      # æœç´¢è¯æ³•åˆ†æå™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                      # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ globals.css            # å…¨å±€ CSS å˜é‡ä¸æ ·å¼
â”‚   â”‚   â””â”€â”€ themes.ts              # ä¸»é¢˜å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                       # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/                      # é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ main.tsx                     # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚
â”œâ”€â”€ .env.example                     # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ package.json                    # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ tailwind.config.js             # Tailwind CSS é…ç½®
â”œâ”€â”€ tsconfig.json                  # TypeScript é…ç½®
â””â”€â”€ vite.config.ts                 # Vite æ„å»ºé…ç½®
```

## ğŸ¯ æ ¸å¿ƒæ¶æ„è§£æ

### 1. æ¨¡å—åŒ–è®¾è®¡ (Features)
é¡¹ç›®é‡‡ç”¨ **Feature-based** æ¶æ„ï¼Œå°†ä¸šåŠ¡é€»è¾‘å†…èšåœ¨ `src/features` ç›®å½•ä¸‹ã€‚æ¯ä¸ª Feature åŒ…å«å…¶ç‹¬æœ‰çš„ï¼š
- **components/**: ä¸šåŠ¡ç»„ä»¶ï¼Œä»…åœ¨è¯¥åŠŸèƒ½å†…ä½¿ç”¨ã€‚
- **api/**: ç›¸å…³çš„åç«¯æ¥å£è¯·æ±‚ã€‚
- **hooks/**: ä¸šåŠ¡é€»è¾‘å°è£…ã€‚

**æ ¸å¿ƒ Featureï¼šThreads (å¸–å­)**
- `ThreadCard`: é¦–é¡µç€‘å¸ƒæµå±•ç¤ºçš„å¡ç‰‡ç»„ä»¶ã€‚
- `ThreadPreviewOverlay`: ç‚¹å‡»å¸–å­åå¼¹å‡ºçš„è¯¦æƒ…é¢„è§ˆå±‚ï¼Œæ”¯æŒå¿«é€Ÿæµè§ˆã€‚
- `ThreadActions`: å¸–å­çš„äº¤äº’æ“ä½œï¼ˆç‚¹èµã€å›å¤ã€å¼•ç”¨ç­‰ï¼‰ã€‚

### 2. ç»„ä»¶åˆ†å±‚ (Components)
- **Layout Components (`components/layout`)**: è´Ÿè´£é¡µé¢çš„æ•´ä½“ç»“æ„ã€‚
    - `AppSidebar`: å·¦ä¾§å¯¼èˆªï¼ŒåŒ…å«æœåŠ¡å™¨åˆ—è¡¨å’Œç”¨æˆ·ä¿¡æ¯ã€‚
    - `TopBar`: é¡¶éƒ¨æ ï¼ŒåŒ…å«æœç´¢æ¡†å’Œé¢åŒ…å±‘/æ ‡é¢˜ã€‚
    - `MainLayout`: æ ¸å¿ƒå†…å®¹åŒºåŸŸçš„åŒ…è£…å™¨ã€‚
- **Common Components (`components/common`)**: é«˜åº¦å¤ç”¨çš„åŸå­ç»„ä»¶ã€‚
    - `RippleButton`: å¸¦æœ‰ç‚¹å‡»æ°´æ³¢çº¹æ•ˆæœçš„æŒ‰é’®ï¼Œæå‡äº¤äº’è´¨æ„Ÿã€‚
    - `LazyImage`: æ”¯æŒæ‡’åŠ è½½å’ŒåŠ è½½çŠ¶æ€å ä½çš„å›¾ç‰‡ç»„ä»¶ã€‚
    - `SearchTokenInput`: æ”¯æŒæ ‡ç­¾åŒ–è¾“å…¥çš„æœç´¢æ¡†æ ¸å¿ƒç»„ä»¶ã€‚

### 3. å¸ƒå±€ç³»ç»Ÿ
åº”ç”¨ä½¿ç”¨åµŒå¥—å¸ƒå±€ç³»ç»Ÿï¼š
1. **RootLayout**: æœ€å¤–å±‚ï¼Œå¤„ç†å…¨å±€æ ·å¼å’Œ ThemeProviderã€‚
2. **MainLayout**: åŒ…å« `AppSidebar` (å·¦) å’Œ `TopBar` (ä¸Š) ä»¥åŠå†…å®¹åŒºåŸŸ (ä¸­)ã€‚
3. **Page Layouts**: å…·ä½“é¡µé¢å†…éƒ¨çš„å¸ƒå±€ï¼ˆå¦‚ `SearchPage` çš„ç€‘å¸ƒæµå¸ƒå±€ï¼‰ã€‚

### 4. çŠ¶æ€ç®¡ç†ä¸æ•°æ®æµ
- **Server State**: ä½¿ç”¨ `TanStack Query` (React Query) ç®¡ç† API æ•°æ®ï¼Œå¤„ç†ç¼“å­˜ã€åŠ è½½çŠ¶æ€å’Œé‡æ–°éªŒè¯ã€‚
- **Global UI State**: ä½¿ç”¨ `Zustand` (æˆ– Context) ç®¡ç†å…¨å±€ UI çŠ¶æ€ï¼ˆå¦‚ä¾§è¾¹æ æŠ˜å ã€ä¸»é¢˜åˆ‡æ¢ï¼‰ã€‚
- **Local State**: ç»„ä»¶å†…éƒ¨ä½¿ç”¨ `useState`/`useReducer` ç®¡ç†å±€éƒ¨äº¤äº’çŠ¶æ€ã€‚

### 5. æ ·å¼ç³»ç»Ÿ
- **Tailwind CSS**: ä¸»è¦æ ·å¼å¼•æ“ï¼Œé€šè¿‡ Utility classes å¿«é€Ÿæ„å»º UIã€‚
- **CSS Variables**: åœ¨ `globals.css` ä¸­å®šä¹‰ä¸»é¢˜å˜é‡ï¼ˆé¢œè‰²ã€åœ†è§’ç­‰ï¼‰ï¼Œæ”¯æŒåŠ¨æ€ä¸»é¢˜åˆ‡æ¢ã€‚
- **Themes**: `styles/themes.ts` å®šä¹‰äº†å…·ä½“çš„ä¸»é¢˜é…ç½®ï¼ˆå¦‚ Light/Dark/OLED æ¨¡å¼ï¼‰ã€‚

## ğŸ“ å¼€å‘è§„èŒƒ

### æ–°å¢åŠŸèƒ½æµç¨‹
1. åœ¨ `src/features/` ä¸‹åˆ›å»ºæ–°ç›®å½•ã€‚
2. å®šä¹‰ API æ¥å£ (`api/`)ã€‚
3. åˆ›å»ºä¸šåŠ¡ç»„ä»¶ (`components/`)ã€‚
4. åœ¨é¡µé¢ä¸­å¼•å…¥ä½¿ç”¨ (`pages/`)ã€‚

### ç»„ä»¶å¼€å‘åŸåˆ™
- **åŸå­åŒ–**: é€šç”¨ UI ç»„ä»¶åº”å°½é‡çº¯ç²¹ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ã€‚
- **ç»„åˆå¼**: å¤æ‚ç»„ä»¶é€šè¿‡ç»„åˆåŸå­ç»„ä»¶æ„å»ºã€‚
- **ç±»å‹å®‰å…¨**: å¿…é¡»å®šä¹‰ Props æ¥å£ï¼Œé¿å…ä½¿ç”¨ `any`ã€‚

### è·¯ç”±ä¸å¯¼èˆª
- è·¯ç”±å®šä¹‰åœ¨ `src/app/router.tsx`ã€‚
- éœ€è¦ç™»å½•çš„é¡µé¢ä½¿ç”¨ `ProtectedRoute` åŒ…è£¹ã€‚
- é¡µé¢ç»„ä»¶ç»Ÿä¸€æ”¾åœ¨ `src/pages/` ä¸‹ã€‚
